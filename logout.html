<!DOCTYPE html>
<html lang="en">
<head>
    <title>Logging Out... - BloodConnect</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="red-cross-styles.css">

    <!-- Firebase Modular SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAG6Drx2JJlBX1TGvLMWPHp_D2xBDTPIjI",
            authDomain: "bloodconnect-b5142.firebaseapp.com",
            databaseURL: "https://bloodconnect-b5142-default-rtdb.firebaseio.com",
            projectId: "bloodconnect-b5142",
            storageBucket: "bloodconnect-b5142.firebasestorage.app",
            messagingSenderId: "631993835929",
            appId: "1:631993835929:web:75554aca166e9058473308"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Perform logout as soon as page loads
        document.addEventListener("DOMContentLoaded", async () => {
            try {
                await signOut(auth);
                sessionStorage.clear(); // VERY IMPORTANT
            } catch (error) {
                console.error("Logout Error:", error);
                document.querySelector('.red-cross-logout-title').textContent = 'Logout Error';
            }

            setTimeout(() => {
                window.location.replace("login.html");
            }, 1500);
        });
    </script>

</head>
<body>
    <div class="red-cross-logout-container">
        <div class="red-cross-logout-card">
            <div class="red-cross-logout-icon">
                <i class="fa-solid fa-spinner fa-spin"></i>
            </div>
            <h2 class="red-cross-logout-title">Logging Out...</h2>
            <p class="red-cross-logout-subtitle">Please wait while we securely log you out</p>
        </div>
    </div>
</body>
</html>
