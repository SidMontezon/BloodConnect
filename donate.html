<!DOCTYPE html>
<html lang="en">
<head>
    <title>Blood Donation Form - BloodConnect</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="red-cross-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<!-- Red Cross Header -->
<header class="red-cross-header">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center">
            <a href="donatordashboard.html" class="red-cross-logo">
                <div class="red-cross-icon">âœš</div>
                <div>
                    <h1 class="red-cross-brand">BloodConnect</h1>
                    <p class="red-cross-tagline">Medical Blood Management</p>
                </div>
            </a>
            <div class="red-cross-nav">
                <a href="donatordashboard.html">Dashboard</a>
                <a href="donate.html" class="active">Donate</a>
                <a href="requestblood.html">Request Blood</a>
                <a href="logout.html" class="btn-red-cross-outline">Logout</a>
            </div>
        </div>
    </div>
</header>

<!-- Blood Donation Form Section -->
<section class="red-cross-donation">
    <div class="container">
        <div class="red-cross-page-header">
            <div class="text-center">
                <h1 class="red-cross-page-title">Blood Donation Form</h1>
                <p class="red-cross-page-subtitle">Schedule your blood donation and help save lives</p>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="red-cross-card">
                    <div class="red-cross-card-header">
                        <i class="fa-solid fa-hand-holding-medical text-red-cross"></i>
                        Donation Information
                    </div>
                    <div class="red-cross-card-body">
                        <form id="donationForm">
                            <!-- Donor Information -->
                            <div class="red-cross-section-title">
                                <h4><i class="fa-solid fa-user text-red-cross me-2"></i>Donor Information</h4>
                            </div>
                            
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="donorName" class="red-cross-form-label">Full Name</label>
                                        <input type="text" class="red-cross-form-control" id="donorName" placeholder="Enter your full name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="donorAge" class="red-cross-form-label">Age</label>
                                        <input type="number" class="red-cross-form-control" id="donorAge" placeholder="Enter your age" min="18" max="65" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="donorContact" class="red-cross-form-label">Contact Number</label>
                                        <input type="tel" class="red-cross-form-control" id="donorContact" placeholder="Enter your contact number" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="bloodType" class="red-cross-form-label">Blood Type</label>
                                        <select class="red-cross-form-control" id="bloodType" required>
                                            <option value="">Select your blood type</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Hospital Information -->
                            <div class="red-cross-section-title">
                                <h4><i class="fa-solid fa-hospital text-red-cross me-2"></i>Preferred Hospital</h4>
                            </div>
                            
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="hospitalName" class="red-cross-form-label">Hospital Name</label>
                                        <input type="text" class="red-cross-form-control" id="hospitalName" placeholder="Enter the hospital name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="hospitalLocation" class="red-cross-form-label">Hospital Location</label>
                                        <input type="text" class="red-cross-form-control" id="hospitalLocation" placeholder="Enter the hospital location" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Donation Schedule -->
                            <div class="red-cross-section-title">
                                <h4><i class="fa-solid fa-calendar-check text-red-cross me-2"></i>Donation Schedule</h4>
                            </div>
                            
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="donationDate" class="red-cross-form-label">Preferred Donation Date</label>
                                        <input type="date" class="red-cross-form-control" id="donationDate" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="red-cross-form-group">
                                        <label for="donationTime" class="red-cross-form-label">Preferred Time</label>
                                        <select class="red-cross-form-control" id="donationTime">
                                            <option value="">Select preferred time</option>
                                            <option value="08:00">8:00 AM</option>
                                            <option value="09:00">9:00 AM</option>
                                            <option value="10:00">10:00 AM</option>
                                            <option value="11:00">11:00 AM</option>
                                            <option value="14:00">2:00 PM</option>
                                            <option value="15:00">3:00 PM</option>
                                            <option value="16:00">4:00 PM</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn-red-cross btn-lg">
                                    <i class="fa-solid fa-hand-holding-medical me-2"></i>
                                    Submit Donation Request
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBElBKqa9ThPR1TbEXlCu-wGdi0vE943O4",
            authDomain: "bloodconnect2-d094a.firebaseapp.com",
            projectId: "bloodconnect2-d094a",
            storageBucket: "bloodconnect2-d094a.firebasestorage.app",
            messagingSenderId: "124251937624",
            appId: "1:124251937624:web:a69830e6bd3ab62e66a32d"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        document.getElementById("donationForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const donorName = document.getElementById("donorName").value;
            const donorAge = document.getElementById("donorAge").value;
            const donorContact = document.getElementById("donorContact").value;
            const bloodType = document.getElementById("bloodType").value;
            const hospitalName = document.getElementById("hospitalName").value;
            const hospitalLocation = document.getElementById("hospitalLocation").value;
            const donationDate = document.getElementById("donationDate").value;

            // Save donation data to Firestore
            db.collection("donations").add({
                donorName: donorName,
                donorAge: donorAge,
                donorContact: donorContact,
                bloodType: bloodType,
                hospitalName: hospitalName,
                hospitalLocation: hospitalLocation,
                donationDate: donationDate
            })
            .then(() => {
                alert("Thank you for donating! Your donation has been scheduled.");
                window.location.href = "donatordashboard.html";  // Redirect to dashboard
            })
            .catch((error) => {
                console.error("Error submitting donation:", error);
                alert("An error occurred. Please try again.");
            });
        });
    </script>
</body>
</html>
